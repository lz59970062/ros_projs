function aa(){this.j={}}var ca;ca="undefined"!==typeof window?window:self;function fa(b){var a=ha;a.j[b]=a.w()}function ka(b,a){var c=ha;return parseFloat((c.j[a]-c.j[b]).toFixed(2))}aa.prototype.w=ca.performance&&ca.performance.now?function(){return performance.now()}:function(){return Date.now()};var ra,sa,ta,Aa,Ba,Ca,A,Ga,Ha,Ia,Ja,Ka,La,Ma,Va,Wa,Xa,Ya;
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,a){void 0===b&&(b=0);void 0===a&&(a=this.byteLength);b=Math.floor(b);a=Math.floor(a);0>b&&(b+=this.byteLength);0>a&&(a+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);if(0>=a-b)return new ArrayBuffer(0);var c=new ArrayBuffer(a-b),p=new Uint8Array(c);b=new Uint8Array(this,b,a-b);p.set(b);return c});
function Za(b,a){var c=b.length;a=a||2;Ya||(Ya=A._get_feature_points_address()>>2);ta.set(b,Ya);A._parse_points(c,a);return new Float32Array(ra.slice(Ya<<2,Ya+c<<2))}function $a(){return A._get_block_vertex_count()}function ab(){La||(La=A._get_line_vertex_start());return new Float32Array(ra.slice(La,A._get_line_vertex_end()))}function ib(){Ka||(Ka=A._get_line_index_start());return new Uint16Array(ra.slice(Ka,A._get_line_index_end()))}function jb(){return A._get_line_vertex_count()}
function kb(b,a,c,p,g,h,k,r,x,m,e){var w=0;p&&(w=p.length,Ha||(Ha=A._get_line_altitudes_address()>>1),Ba.set(p,Ha));r&&r.length&&(Ja||(Ja=A._get_line_turnings_address()),sa.set(r,Ja));g=g||0;m=m||0;e=e||k.length/2;Ga||(Ga=A._get_line_data_address()>>1);Ba.set(b,Ga);Ia||(Ia=A._get_line_points_address()>>2);Aa.set(k,Ia);A._append_line_data(b.length,a[0],a[1],a[2],a[3],c,w,g,h?1:0,k.length,x,m,e)}function lb(){A._reset_line()}
function mb(b){if(ra)b&&b();else{var a=nb();var c=new WebAssembly.Memory({initial:70,maximum:70});WebAssembly.instantiate(a,{env:{DYNAMICTOP_PTR:0,tempDoublePtr:0,ABORT:0,STACKTOP:0,STACK_MAX:0,gb:0,fb:0,memory:c},global:{NaN:NaN,Infinity:Infinity}}).then(function(a){ra=c.buffer;ta=new Float32Array(ra);Aa=new Int32Array(ra);sa=new Int8Array(ra);Ba=new Int16Array(ra);Ca=new Uint16Array(ra);A=a.instance.exports;b&&b()})}}
function ob(b,a,c,p,g){var h={fixedLabel:[],lineLabel:[]};if(!b)return h;var k=[];if(a&&a.length)for(var r=0;r<a.length;r++){var x=a[r],m=x[0]/4;H[m+1]===pb&&k.push(Q(H[m]+1,x[0],x[0]+x[1]))}a=Q(0,c[0],c[0]+c[1])||[];p=p.height;h.fixedLabel=qb(b,k,p,g,void 0);k=[];for(c=0;c<a.length;c++){var e=b,w=a[c];r=g;x=p;m=k;var d=w[0]/4,v=Q(H[d]+1,w[0],w[0]+w[1]),t=Q(0,v[6][0],v[6][0]+v[6][1]);w=[];for(var q=0;q<t.length;q++)w[q]=new Uint16Array(e,t[q][0],t[q][1]/2);t=rb;var f=Math.pow(2,18-r.zoom),l=r.col*
r.baseTileSize*f,n=r.row*r.baseTileSize*f,E=new Uint16Array(e,v[4][0],v[4][1]/2),u=E.length,y=sb[d+1],B=tb.b(ub,y,"pointText",r.useZoom,vb,!1,T);d=sb[d+2];var C=wb(e,v[0][0],v[0][1],"utf-8"),z=w.length||C.split("").length;if(0!==z){var D=new Int32Array(e,v[1][0],v[1][1]/4),G=new Int16Array(e,v[5][0],v[5][1]/2),R=[G[0]],V=Array.prototype.slice.call(D.slice(0,2)),K=2;for(q=1;K<D.length;K+=2,q++)V[K]=V[K-2]+D[K],V[K+1]=V[K-1]+D[K+1],1===G.length?R[q]=G[0]:1<G.length&&(R[q]=R[q-1]+G[q]);var M=new Uint16Array(e,
v[3][0],v[3][1]/2);e=new Uint16Array(e,v[2][0],v[2][1]/2);for(q=0;q<u;q++)if(v=E[q],xb(v,r.useZoom)){if(r.processedLabelZooms&&r.processedLabelZooms.length&&!T){D=r.processedLabelZooms;var W=!1;for(K=0;K<D.length;K++)if(xb(v,D[K])){W=!0;break}if(W)continue}K=M[q];D=q*z*2;D=V.slice(D,D+2*z);var Y=W=1E3,X=-1E3,O=-1E3,J=w.slice(0);K&&J.reverse();for(var L,U,P,N=[],F=0;F<z;F++){var I=e[z*q+F],Z=D[2*F]/100,da=D[2*F+1]/100,Na=0;0<G.length&&(Na=R[q*z]/100);0===F&&(L=Z,U=da,P={lng:l+L,lat:n+U});Z=(Z-L)/f;
da=(da-U)/f;var S=J[F],ea=null,ua=null;if(S&&0<S.length){var xa=S[0];ea=S[1];var ia=S[2]/t;S=S[3]/t;ua=[ia,S];var la=xa/512,ma=(x-ea-S*t)/x,Oa=xa=(xa+ia*t)/512;ea=(x-ea)/x;ea=[la,ma,xa,ma,Oa,ea,la,ma,Oa,ea,la,ea];la=Z-ia/2;ma=da+S/2;S=da-S/2;ia=Z+ia/2;la<W&&(W=la);ia>X&&(X=ia);S<Y&&(Y=S);ma>O&&(O=ma)}N.push({offset:[Z,da],z:Na,size:ua,angle:I,texcoord:ea})}J=D[2*(z-1)]-D[0];D=D[2*(z-1)+1]-D[1];1===K&&(J=-J,D=-D);0===J?D=0<D?90:270:(F=Math.atan(D/J)/Math.PI*180,0>J&&0<D?F+=180:0>J&&0>D?F+=180:0<J&&
0>D&&(F+=360),360===F&&(F=0),D=F);m.push({type:"line",rank:d,name:C,wordCount:z,pt:P,mcInTile:{x:L,y:U},reverse:K,styleId:y,styleText:B,bds:[W,Y,X,O],wordsInfo:N,labelAngle:D,tracer:v,processedInZoom:r.useZoom,key:"line_"+d+"_"+P.lng+"_"+P.lat})}}}h.lineLabel=k;h.textureHeight=p;h.tileInfo=g;return h}
function qb(b,a,c,p,g){for(var h=[],k=0;k<a.length;k++){var r=b,x=a[k],m=p,e=c,w=h,d=g;if(x&&x.length){d=d||vb;var v=m.useZoom;9===v&&(v=8);for(var t=Math.pow(2,18-m.zoom),q=m.col*m.baseTileSize*t,f=m.row*m.baseTileSize*t,l=m.col,n,E=l,u=1536*Math.pow(2,m.zoom-3)/(m.baseTileSize||256),y=u/2-1,B=-u/2;E>y;)E-=u;for(;E<B;)E+=u;n=E;var C=q;n>l?C=q-40075452:n<l&&(C=q+40075452);for(var z=0;z<x.length;z++){var D=x[z],G=D[0]/4,R=H[G],V=H[G+1],K=tb.b(ub,V,"point",v,d,!1,T),M=tb.b(ub,V,"pointText",v,d,!1,T),
W=Q(R+1,D[0],D[0]+D[1]);if(!(M&&0!==M.length||K&&0!==K.length))if(5===v){if(!W||!W.length)continue;for(var Y=0;Y<W.length;Y++){var X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),U;X[1]&&L[1][1]&&(U=wb(r,L[1][0],L[1][1],"utf-8"));if("\u5317\u4eac"===U){K=tb.b(ub,V,"point",6,d,!1,T);M=tb.b(ub,V,"pointText",6,d,!1,T);break}}}else continue;if(W){var P=null,N=1,F=0,I=0;K&&K[0]&&(K=K[0],P=K.icon,N=(K.zoom||100)/100);for(Y=0;Y<W.length;Y++)if(X=W[Y],O=X[0]/4,J=H[O],L=Q(J+1,X[0],X[0]+X[1]),X[1]){var Z=H[O+
1];if(xb(Z,m.useZoom)){if(m.processedLabelZooms&&m.processedLabelZooms.length&&!T){for(var da=m.processedLabelZooms,Na=!1,S=0;S<da.length;S++)if(xb(Z,da[S])){Na=!0;break}if(Na)continue}var ea=Q(0,L[2][0],L[2][0]+L[2][1]),ua=[];for(S=0;S<ea.length;S++)ua[S]=new Uint16Array(r,ea[S][0],ea[S][1]);var xa=void 0;L[1][1]&&(xa=wb(r,L[1][0],L[1][1],"utf-8"));var ia=xa||"";if(!(M&&0<M.length&&0===ua.length&&""===ia)){var la=H[O+2],ma=H[O+3],Oa=H[O+4],dc=Math.round(la/100),ec=Math.round(ma/100),zb={lng:q+dc,
lat:f+ec},Hc={lng:C+dc,lat:f+ec},fc=void 0;L[0][1]&&(fc=wb(r,L[0][0],L[0][1],void 0));var Ab=H[O+5],gc=0<ua.length||""!==ia&&0<M.length,Bb=yb(P),ic=!(4!==Ab||!gc||!Bb),Ic=!!ia.match(/[qypjg]/g),Jc=fc||"",Kc=zb,Lc=Hc,Mc=ia,Nc=Ic,Oc=Oa,Pc=V,Qc=M,Rc=P,Sc=ic,Tc=Ab,Uc=x.R;a:{var va=void 0,bb=Z,jc=m.useZoom;Cb[bb]||(va=bb.toString(2),8>va.length&&(va=Array(8-va.length+1).join("0")+va),Cb[bb]=va);va=Cb[bb];for(var kc=Rb[jc].start,Vc=Rb[jc].end-kc+1,cb=0;cb<Vc;cb++)if("1"===va[cb]){var lc=cb+kc;break a}lc=
99}var ba={type:"fixed",guid:Jc,pt:Kc,ptFix:Lc,name:Mc,containDescendings:Nc,rank:Oc,iconPos:null,textPos:null,styleId:Pc,styleText:Qc,icon:Rc,textOnIcon:Sc,direction:Tc,onDefaultFloor:Uc,startZoom:lc||99,tilePosStr:la+","+ma,tracer:Z,processedInZoom:m.useZoom,key:"fixed_"+Oa+"_"+zb.lng+"_"+zb.lat};if(null===P||ic)null!==P&&(ba.iconSize=Bb);else{var Db=yb(P);if(Db){var Eb=Db[0]/2*N,Fb=Db[1]/2*N,db=Math.round(-Eb/2),eb=Math.round(-Fb/2),Gb=db+Eb,Hb=eb+Fb;var mc={vertex:[db,eb,Gb,eb,Gb,Hb,db,eb,Gb,
Hb,db,Hb],texcoord:null,width:Eb,height:Fb,iconType:P}}else mc=null;ba.iconPos=mc;ba.iconPos&&(F=ba.iconPos.width,I=ba.iconPos.height)}if(ua.length){var Wc=ba,fb=Ab,Ib=ua,Jb=F,nc=I,gb=e,Pa=rb;"number"!==typeof fb&&(fb=0);for(var Da=Ib.length,oc=[],pc=[],Ea=0,Qa=0,ja=0;ja<Da;ja++)Qa+=Math.round(Ib[ja][3]/Pa);for(ja=0;ja<Da;ja++){var hb=Ib[ja],qc=hb[0],rc=hb[1],Fa=Math.round(hb[2]/Pa),ya=Math.round(hb[3]/Pa);0===Jb&&(fb=4);switch(fb){case 3:var na=Qa/2-ya+2*(Da-1)/2;var wa=Math.round(-Jb/2-Fa-2);var za=
Math.round(na-Ea-2*ja);break;case 1:na=Qa/2-ya+2*(Da-1)/2;wa=Math.round(Jb/2+2);za=Math.round(na-Ea-2*ja);break;case 2:na=nc/2+Qa-ya+2*Da;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 0:na=-nc/2-2-ya;wa=Math.round(-Fa/2);za=Math.round(na-Ea-2*ja);break;case 4:na=-Qa/2-2*(Da-1)/2,wa=Math.round(-Fa/2),za=Math.round(na-Ea-2*ja)}Ea+=ya;var sc=wa+Math.round(Fa),tc=za,uc=sc,Kb=tc+Math.round(ya),Lb=qc/512,Mb=(gb-rc-ya*Pa)/gb,vc=(qc+Fa*Pa)/512,Xc=Mb,wc=vc,Nb=(gb-rc)/gb,Yc=Lb,Zc=Nb;oc.push(wa,
za,sc,tc,uc,Kb,wa,za,uc,Kb,wa,Kb);pc.push(Lb,Mb,vc,Xc,wc,Nb,Lb,Mb,wc,Nb,Yc,Zc)}Wc.textPos={vertex:oc,texcoord:pc}}if(ba.textPos||ba.iconPos){var Ra=1E3,Sa=1E3,Ta=-1E3,Ua=-1E3;if(ba.iconPos)for(var Ob=ba.iconPos.vertex,oa=0,Pb=Ob.length;oa<Pb;oa+=2){var pa=Ob[oa],qa=Ob[oa+1];pa<Ra&&(Ra=pa);pa>Ta&&(Ta=pa);qa<Sa&&(Sa=qa);qa>Ua&&(Ua=qa)}if(ba.textPos){var Qb=ba.textPos.vertex;oa=0;for(Pb=Qb.length;oa<Pb;oa+=2)pa=Qb[oa],qa=Qb[oa+1],pa<Ra&&(Ra=pa),pa>Ta&&(Ta=pa),qa<Sa&&(Sa=qa),qa>Ua&&(Ua=qa)}ba.bds=[Ra,
Sa,Ta,Ua]}(Bb||gc)&&w.push(ba)}}}}}}}return h}function yb(b){if(!b||"disekong"===b)return null;var a=Sb[b]||Sb["MapRes/"+b];!a&&b&&48<=b.charCodeAt(0)&&57>=b.charCodeAt(0)&&(a=Sb["_"+b]);return a}var Tb;
Tb=function(b,a,c,p){var g,h;a=Q(0,a[0],a[0]+a[1]);if(!a.length)return{};for(var k={},r=[],x=[],m=[],e=[],w=0;w<a.length;w++){var d=Q(0,a[w][0],a[w][0]+a[w][1]),v=d[0];v=Q(0,v[0],v[0]+v[1]);d=d[1];var t=Q(H[d[0]>>2]+1,d[0],d[0]+d[1]);a:{var q=b;if((g=Q(0,t[2][0],t[2][0]+t[2][1]))&&g[0]){for(var f=0;f<g.length;f++){var l=g[f],n=l[0]>>2;n=H[n];l=Q(n+1,l[0],l[0]+l[1]);if(!l[0][1]){q=[];g=[0,0];var E=h=void 0;break a}}h=[];var u=[0,0],y=[2.003772637E7,1.102819087E7];d=[-2.003772637E7,-1.060158079E7];
E=0;f=c.mercatorSize;var B=c.col*f,C=c.row*f;for(f=0;f<g.length;f++){l=g[f];n=l[0]>>2;n=H[n];l=Q(n+1,l[0],l[0]+l[1]);l=new Int32Array(q,l[0][0],l[0][1]>>2);n=[B+l[0]/100,C+l[1]/100];u[0]+=n[0];u[1]+=n[1];n[0]<y[0]&&(y[0]=n[0]);n[1]<y[1]&&(y[1]=n[1]);n[0]>d[0]&&(d[0]=n[0]);n[1]>d[1]&&(d[1]=n[1]);for(var z=2;z<l.length;z+=2)n[z]=n[z-2]+l[z]/100,n[z+1]=n[z-1]+l[z+1]/100,u[0]+=n[z],u[1]+=n[z+1],n[z]<y[0]&&(y[0]=n[z]),n[z+1]<y[1]&&(y[1]=n[z+1]),n[z]>d[0]&&(d[0]=n[z]),n[z+1]>d[1]&&(d[1]=n[z+1]);E+=l.length;
h.push(n)}u[0]/=E/2;u[1]/=E/2;q=h;g=u;h=y;E=d}else q=[],g=[0,0],E=h=void 0}y=Q(0,t[3][0],t[3][0]+t[3][1]);d=[];for(u=0;u<y.length;u++)d[u]=String.fromCharCode.apply(String,new Uint8Array(b,y[u][0],y[u][1]));B=String.fromCharCode.apply(String,new Uint8Array(b,t[1][0],t[1][1]));y=void 0;t=String.fromCharCode.apply(String,new Uint8Array(b,t[0][0],t[0][1]));for(u=0;u<d.length;u++)if(d[u]===B){y=u;break}q={defaultFloor:y,currentFloor:y,uid:t,floors:[],contour:q,boundsMin:h,boundsMax:E,center:g,floorLength:d.length};
for(u=0;u<d.length;u++){h=d[u];a:{g=b;E=v;B=h;for(f=0;f<E.length;f++)if(C=Q(H[E[f][0]>>2]+1,E[f][0],E[f][0]+E[f][1]),String.fromCharCode.apply(String,new Uint8Array(g,C[0][0],C[0][1]))===B){B=C[1];break a}B=null}g=b;C=t;l=h;h=c;var D=p;E=u===y?!0:!1;if(B)if(B=Q(0,B[0],B[0]+B[1]),B.length){f={base:[],contour:[]};for(var G=0;G<B.length;G++){n=B[G];z=n[0]>>2;var R=H[z+1];7===R&&(D=Ub(g,n,h,f.contour,D,1,{v:!0,M:!0}))}for(G=0;G<f.contour.length;G++)f.contour[G].uid=C;for(G=0;G<B.length;G++)n=B[G],z=n[0]>>
2,R=H[z+1],7===R&&(D=Ub(g,n,h,f.base,D,2,{v:!0}));for(G=0;G<f.base.length;G++)f.base[G].uid=C;(n=Vb(g,B,h,!0))&&0!==n.vertex.length&&(f.area3D=n,f.area3D.uid=C,f.area3D.border&&(f.indoorBorder3D=f.area3D.border,f.indoorBorder3D.uid=C,delete f.area3D.border));f.floorName=l;C=[];for(l=0;l<B.length;l++)n=B[l],z=n[0]>>2,R=H[z+1],R===pb&&(n=Q(H[z]+1,n[0],n[0]+n[1]),n.R=E,C.push(n));f.pois=qb(g,C,E?H[2]:H[3],h,Wb);g=f}else g={floorName:l};else g={floorName:l};q.floors[u]=g}k[t]=q;if(q.floors[y]){if(q.floors[y].base)for(u=
0;u<q.floors[y].base.length;u++)r.push(q.floors[y].base[u]);if(q.floors[y].contour)for(u=0;u<q.floors[y].contour.length;u++)x.push(q.floors[y].contour[u]);q.floors[y].indoorBorder3D&&m.push(q.floors[y].indoorBorder3D);q.floors[y].area3D&&e.push(q.floors[y].area3D)}k.tileInfo=c}0===r.length&&(r=null);0===x.length&&(x=null);0===m.length&&(m=null);0===e.length&&(e=null);return{indoorDataResult:k,indoorBase:r,indoorBaseContour:x,indoorArea3D:e,indoorBorder3D:m}};
var tb=function(){function b(b,c,p,g,m){if(g=g||null){m=g[2];switch(c){case "point":m=m[0];break;case "pointText":m=m[1];break;case "line":m=m[3];break;case "polygon":m=m[4];break;case "polygon3d":m=m[5]}var e=p-1;"line"===c&&12===p&&(e=p);e=g[1][e][0];e=e[b];!e&&21>p&&("point"===c||"pointText"===c)&&(e=g[1][p][0],e=e[b]);p={l:e,style:m,s:[]}}else if(m){g=m.baseFs;b:{var h=m.pa;if("[object Object]"===Object.prototype.toString.call(h)){for(e in h){e=!1;break b}e=!0}else e=!1}m=e?m.StyleBody||[]:m.zoomStyleBody[p]||
[];e=g[2];switch(c){case "point":e=e[0];m=m[0]||{};break;case "pointText":e=e[1];m=m[1]||{};break;case "line":e=e[3];m=m[3]||{};break;case "polygon":e=e[4];m=m[4]||{};break;case "polygon3d":e=e[5],m=m[5]||{}}h=g[1][p-1][0];h=h[b];!h&&21>p&&("point"===c||"pointText"===c)&&(h=g[1][p][0],h=h[b]);p={l:h,style:e,s:m}}else p={l:null,style:[],s:[]};m=p;p=m.l;g=m.style;m=m.s;e=[];if(!p)return e;for(h=0;h<p.length;h++){var d=m[p[h]]||g[p[h]];if(d){switch(c){case "polygon":d={g:b,f:a(d[0]),c:a(d[1]),borderWidth:d[2],
B:d[3],C:d[4],oa:d[5],Y:d[6],la:d[7],ma:a(d[8])};break;case "line":d={g:b,c:a(d[0]),f:a(d[1]),borderWidth:d[2],o:d[3],V:d[4],G:d[5],aa:d[6],ba:d[7],ca:d[8],ea:d[9],fa:d[10],B:d[11],i:d[12],C:d[13],X:d[14],da:d[15],Z:d[16],ha:d[17],ka:d[18]};break;case "pointText":d=d&&0!==d.length?{sid:b,fontRgba:a(d[0]),haloRgba:a(d[1]),backRgba:a(d[2]),fontSize:d[3],haloSize:d[4],fontWeight:d[5],fontStyle:d[6],density:d[7]}:null;break;case "point":d={sid:b,rank:d[0],na:d[1],icon:d[2],iconType:d[3],ia:d[4],density:d[5],
zoom:d[6]};break;case "polygon3d":d={g:b,filter:d[0],ratio:d[1],$:d[2],borderWidth:d[3],c:a(d[4]),H:a(d[5]),m:a(d[6]),ja:d[7]}}d&&(d.W=p[h],e[e.length]=d)}}return e}function a(a){var b=a;if(g[b])return g[b];a>>>=0;g[b]=[a&255,a>>8&255,a>>16&255,a>>24&255];return g[b]}var c={},p={},g={};return{b:function(a,g,r,x,m,e,w){a=(a||"default")+"-"+g+"-"+r+"-"+x;e&&(a+="-indoor");if(m)return p[a]||(p[a]=b(g,r,x,m)),p[a];c[a]||(c[a]=b(g,r,x,m,w));return c[a]}}}();
function Xb(b,a){if(b.fill)b.fill(a);else for(var c=0;c<b.length;c++)b[c]=a}
Uint8Array.prototype.slice||(Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),
Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}));var sb,H,Yb;
function wb(b,a,c,p){b=new Uint8Array(b,a,c);if(self.TextDecoder)return Yb||(Yb=new TextDecoder("utf-8")),Yb.decode(b).replace(/\\\\/g,"\\");if("utf-8"===p)for(p="",a=0;a<b.length;a++)c=b[a],128>c?p+=String.fromCharCode(c):191<c&&224>c?(p+=String.fromCharCode((c&31)<<6|b[a+1]&63),a+=1):223<c&&240>c?(p+=String.fromCharCode((c&15)<<12|(b[a+1]&63)<<6|b[a+2]&63),a+=2):(c=((c&7)<<18|(b[a+1]&63)<<12|(b[a+2]&63)<<6|b[a+3]&63)-65536,p+=String.fromCharCode(c>>10|55296,c&1023|56320),a+=3);else{if(4096>=c)return String.fromCharCode.apply(String,
b);p="";var g=Math.ceil(c/4096);for(a=0;a<g;a++)p+=String.fromCharCode.apply(String,b.slice(4096*a,a===g-1?c:4096*(a+1)))}return p.replace(/\\\\/g,"\\")}function Q(b,a,c){var p=a>>2,g=H[p+b];a=4*(g+b+1)+a;var h=[];if(a>c)return h;for(c=0;c<g;c++){var k=H[p+b+1+c],r=a+k;h[c]=[a,k];0!==r%4?a=r+4-r%4:a=r}return h}
var pb=3,Zb=1E-5,$b=1,vb=null,Wb=null,Sb=null,ub="",T=null,ha=new aa,ac=20,bc=65536,cc=[245,245,245,255],hc=1,xc=null,yc=null,Rb={3:{start:3,end:3,a:3},4:{start:4,end:5,a:5},5:{start:4,end:5,a:5},6:{start:6,end:7,a:7},7:{start:6,end:7,a:7},8:{start:8,end:9,a:9},9:{start:8,end:9,a:9},10:{start:10,end:10,a:10},11:{start:11,end:13,a:12},12:{start:11,end:13,a:12},13:{start:11,end:13,a:12},14:{start:14,end:15,a:15},15:{start:14,end:15,a:15},16:{start:16,end:17,a:17},17:{start:16,end:17,a:17},18:{start:18,
end:25,a:19},19:{start:18,end:25,a:19},20:{start:18,end:25,a:19},21:{start:18,end:25,a:19},22:{start:18,end:25,a:19},23:{start:18,end:25,a:19},24:{start:18,end:25,a:19},25:{start:18,end:25,a:19}},rb,zc,Ac=!1,Bc=[],Cc=!1;
function nb(){for(var b=atob("AGFzbQEAAAABNAdgAX8Bf2AAAX9gAX8AYAJ/fwBgAABgDX9/f39/fH9/f39/f38AYAt/f3x/f39/f39/fwACngEKA2Vudg5EWU5BTUlDVE9QX1BUUgN/AANlbnYNdGVtcERvdWJsZVB0cgN/AANlbnYFQUJPUlQDfwADZW52CFNUQUNLVE9QA38AA2VudglTVEFDS19NQVgDfwADZW52AmdiA38AA2VudgJmYgN/AAZnbG9iYWwDTmFOA3wABmdsb2JhbAhJbmZpbml0eQN8AANlbnYGbWVtb3J5AgFGRgMeHQABAgMDAQEBAQEBAQEBBAEBBAEBAQEBAQMFAwYEBnMUfwEjAAt/ASMBC38BIwILfwEjAwt/ASMEC38BIwULfwEjBgt/AUEAC38BQQALfwFBAAt/AUEAC3wBIwcLfAEjCAt/AUEAC38BQQALfwFBAAt/AUEAC3wBRAAAAAAAAAAAC38BQQALfAFEAAAAAAAAAAALB/AEHAtfcmVzZXRfbGluZQAOFl9nZXRfYmxvY2tfaW5kZXhfc3RhcnQAEghzZXRUaHJldwAEGl9nZXRfbGluZV90dXJuaW5nc19hZGRyZXNzAAgjX2dldF9ibG9ja190cmlhbmdsZV9pbmRpY2VzX2FkZHJlc3MAEBZfZ2V0X2xpbmVfdmVydGV4X2NvdW50AA0Kc3RhY2tBbGxvYwAAF19nZXRfYmxvY2tfdmVydGV4X2NvdW50ABYXX2dldF9ibG9ja192ZXJ0ZXhfc3RhcnQAFBRfZ2V0X2xpbmVfdmVydGV4X2VuZAAMG19nZXRfZmVhdHVyZV9wb2ludHNfYWRkcmVzcwAXDHN0YWNrUmVzdG9yZQACFF9nZXRfYmxvY2tfaW5kZXhfZW5kABMbX2dldF9saW5lX2FsdGl0dWRlc19hZGRyZXNzAAYVX2dldF9ibG9ja192ZXJ0ZXhfZW5kABUJc3RhY2tTYXZlAAELcnVuUG9zdFNldHMAHBZfZ2V0X2xpbmVfdmVydGV4X3N0YXJ0AAsNX3BhcnNlX3BvaW50cwAYGF9nZXRfbGluZV9wb2ludHNfYWRkcmVzcwAHE2VzdGFibGlzaFN0YWNrU3BhY2UAAxNfZ2V0X2xpbmVfaW5kZXhfZW5kAAoRX2FwcGVuZF9saW5lX2RhdGEAGRVfZ2V0X2xpbmVfaW5k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"),a=
b.length,c=new Uint8Array(a),p=0;p<a;p++)c[p]=b.charCodeAt(p);return c.buffer}function Dc(){Cc||(Cc=!0,mb(function(){Ac=!0;if(Bc.length)for(var b=0;b<Bc.length;b++){var a=Bc[b];Ec(a.data,a.u,a.T)}Bc=[]}))}self.onmessage=function(b){b=b.data;var a=b.action,c=b.isText,p=b.isPoi;if(self[a])self[a](b);self.isText=c;self.isPoi=p};var Cb={0:"00000000",16:"00010000",32:"00100000",48:"00110000",64:"01000000",96:"01100000"};
function xb(b,a){if(!Cb[b]){var c=b.toString(2);8>c.length&&(c=Array(8-c.length+1).join("0")+c);Cb[b]=c}c=Cb[b];return"1"===c[a-Rb[a].start]}
function Ec(b,a,c){fa("finishLoadTile");try{fa("begin(ParseData)"),Fc(b,a,c,function(a){fa("finishParseData");a.base=a.a;a.base3d=a.A;a.virtual=a.U;a.building3d=a.D;a.building3dMesh=a.F;a.indoorData=a.N;a.indoorBase=a.J;a.indoorBaseContour=a.K;a.indoorBorder3D=a.L;a.indoorArea3D=a.I;a.label=a.label;a.tileInfo=a.u;for(var b=[],c=0;c<a.base.length;c++){var k=a.base[c];b.push(k.data[0].buffer);b.push(k.data[1].buffer)}if(a.base3d)for(c=0;c<a.base3d.length;c++)k=a.base3d[c],"block"===k.type?(b.push(k.data.vertex.buffer),
b.push(k.data.index.buffer)):(b.push(k.data[0].buffer),b.push(k.data[1].buffer));if(a.virtual)for(c=0;c<a.virtual.length;c++)k=a.virtual[c],b.push(k.data[0].buffer),b.push(k.data[1].buffer);a.building3d&&(b.push(a.building3d.vertex.buffer),b.push(a.building3d.index.buffer));if(a.indoorBase)for(c=0;c<a.indoorBase.length;c++)k=a.indoorBase[c],b.push(k.data[0].buffer),b.push(k.data[1].buffer);if(a.indoorBaseContour)for(c=0;c<a.indoorBaseContour.length;c++)k=a.indoorBaseContour[c],b.push(k.data[0].buffer),
b.push(k.data[1].buffer);if(a.indoorBorder3D&&a.indoorBorder3D&&0<a.indoorBorder3D.length)for(c=0;c<a.indoorBorder3D.length;c++)b.push(a.indoorBorder3D[c].data[0].buffer),b.push(a.indoorBorder3D[c].data[1].buffer);if(a.indoorArea3D&&0<a.indoorArea3D.length)for(c=0;c<a.indoorArea3D.length;c++)b.push(a.indoorArea3D[c].vertex.buffer),b.push(a.indoorArea3D[c].index.buffer);a.label&&(a.label.textImageBitmap&&b.push(a.label.textImageBitmap),a.label.indoorTextImageBitmap&&b.push(a.label.indoorTextImageBitmap));
a.perfStat=[ka("beginLoadTile","finishLoadTile"),ka("finishLoadTile","beginParseData"),ka("beginParseData","finishParseData"),zc];a.endTime=Date.now();postMessage(a,b)})}catch(p){postMessage({tileInfo:a,tileKey:c,error:"parse_error",message:p.message})}}
self.loadTileData=function(b){var a=b.url,c={};c.baseTileSize=b.tileInfo.baseTileSize;c.col=b.tileInfo.col;c.loopOffsetX=b.tileInfo.loopOffsetX;c.mercatorSize=b.tileInfo.mercatorSize;c.row=b.tileInfo.row;c.tileSize=b.tileInfo.tileSize;c.tileTypeName=b.tileInfo.tileTypeName;c.useZoom=b.tileInfo.useZoom;c.zoom=b.tileInfo.zoom;c.processedLabelZooms=b.tileInfo.processedLabelZooms;c.hasPoly=b.hasPoly;c.hasLine=b.hasLine;var p=b.tileKey;b.featureStyle&&(vb=JSON.parse(b.featureStyle),T=null);b.indoorStyle&&
(Wb=JSON.parse(b.indoorStyle));b.iconSetInfo&&(Sb=JSON.parse(b.iconSetInfo));b.iconInfo&&(rb=b.iconInfo.textSizeRatio);b.mapStyleId&&(ub=b.mapStyleId);b.customMapStyle&&(T=JSON.parse(b.customMapStyle),vb=null);c.style=ub;xc=yc=null;zc=0;var g=new XMLHttpRequest;g.open("GET",a,!0);b=b.tileInfo.header;if(b instanceof Array)for(var h=0;h<b.length;h++)b[h]&&b[h].hasOwnProperty("key")&&b[h].hasOwnProperty("value")&&g.setRequestHeader(b[h].key,b[h].value);g.responseType="arraybuffer";g.timeout=1E4;g.ontimeout=
function(){postMessage({tileInfo:c,tileKey:p,error:"net_timeout",message:"net status: timeout"})};g.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(zc=Math.round(g.response.byteLength/1024),Ac?Ec(g.response,c,p):Bc[Bc.length]={data:g.response,u:c,T:p}),(400<=this.status||0===this.status)&&postMessage({tileInfo:c,tileKey:p,error:"net_error",message:"net status: "+this.status,event:{title:a,ga:JSON.stringify({responseURL:a,status:this.status})}}))};g.send();Dc();fa("beginLoadTile")};
function Fc(b,a,c,p){var g=[],h=[],k=[],r=0,x=a.useZoom,m=null,e=null;H=new Uint32Array(b);sb=new Int32Array(b);hc=H[0];var w=Q(H[1]+2,0,b.byteLength),d=Q(0,w[0][0],w[0][0]+w[0][1]),v=!1,t=void 0===a.hasLine?!0:a.hasLine,q=void 0===a.hasPoly?!0:a.hasPoly;if(q){for(var f=0;f<d.length;f++){var l=d[f],n=l[0]>>2,E=H[n+1];if(7===E){v=!0;break}}!1===v&&(r=Ub(null,null,a,g,r,0))}for(f=0;f<d.length;f++)if(l=d[f],n=l[0]>>2,E=H[n+1],v=H[n+2],7===E&&q)r=Ub(b,l,a,g,r,0);else if(4===E&&t)13E3===v||83500===v?Gc(b,
l,x,k,0):r=Gc(b,l,x,g,r);else if(15===E&&t){var u=r;r=Ub(b,l,a,h,r,1,{O:!0})}else 16===E&&t?r=Gc(b,l,x,h,r,!0):18===E&&t?T&&T.zoomFrontStyle&&T.zoomFrontStyle[x]&&"off"===T.zoomFrontStyle[x].bmapRoadarrowVisibility||(r=$c(b,l,x,h,r)):19===E&&t?r=ad(b,l,x,g,r):20===E&&t&&(r=bd(b,l,x,h,r));t&&((m=cd(d,a))&&h.push({type:"block",data:m,has3D:!0,has2D:!1}),m=Vb(b,d,a),f=dd(b,d,a),0<f&&(e={vertex:new Float32Array(7*f),index:new Uint16Array(f/3)},dd(b,d,a,e.vertex,e.index)));f={S:wb(b,w[3][0],w[3][1],void 0)||
"",height:H[2]||0};var y=ob(b,d,w[2],f,a)||{};y.textImgStr=f.S||null;y.indoorLabel=[];w[4][1]&&H[3]?(y.indoorTextImgStr=wb(b,w[4][0],w[4][1],void 0)||null,y.indoorTextureHeight=H[3]):y.indoorTextImgStr=null;if(q){var B=Tb(b,w[1],a,u?u:r);if(B.indoorDataResult)for(var C in B.indoorDataResult)if("tileInfo"!==C)for(b=B.indoorDataResult[C],r=b.defaultFloor,B.indoorDataResult[C].tileKey=c,f=0;f<b.floors.length;f++)r===f&&b.floors[f].pois&&(y.indoorLabel=y.indoorLabel.concat(b.floors[f].pois));H=sb=null}g.length&&
(g=ed(g));var z={a:g,A:h.length?h:null,U:k.length?k:null,D:m,F:e,N:B?B.indoorDataResult:null,J:B?B.indoorBase:null,K:B?B.indoorBaseContour:null,L:B?B.indoorBorder3D:null,I:B?B.indoorArea3D:null,label:y,u:a};if((y.textImgStr||y.indoorTextImgStr)&&self.fetch&&self.createImageBitmap&&self.Promise){var D=function(){p(z)},G=0;y.textImgStr&&(G++,fetch(y.textImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){y.textImageBitmap=a;y.textImgStr=
null;G--;0===G&&p(z)},D)},D)},D));y.indoorTextImgStr&&(G++,fetch(y.indoorTextImgStr).then(function(a){a.blob().then(function(a){createImageBitmap(a,{imageOrientation:"flipY"}).then(function(a){y.indoorTextImageBitmap=a;y.indoorTextImgStr=null;G--;0===G&&p(z)},D)},D)},D))}else p(z)}
function ed(b){for(var a=void 0,c=0,p=0,g=!1,h=0;h<b.length;h++)"fill"!==b[h].type?a=void 0:b[h].type===a?(b[c]=fd(b[c],b[h],p),b[h].P=!0,p+=b[h].h,g=!0):(c=h,a=b[h].type,p=b[h].h);return g?b.filter(function(a){return!a.P}):b}function fd(b,a,c){var p=b.data[1],g=a.data[1];b.data[0]=gd(b.data[0],a.data[0]);b.data[1]=gd(p,g,c);b.has3D=b.has3D||a.has3D;b.has2D=b.has2D||a.has2D;return b}
function gd(b,a,c){if(b.constructor===ArrayBuffer){var p=new Uint8Array(b.byteLength+a.byteLength);p.set(new Uint8Array(b),0);p.set(new Uint8Array(a),b.byteLength);return p.buffer}p=new b.constructor(b.length+a.length);p.set(b,0);if(c)for(var g=0;g<a.length;g++)a[g]+=c;p.set(a,b.length);return p}
function Ub(b,a,c,p,g,h,k){var r=[];b&&(r=a?a[0]>>2:0,r=H[r],r=Q(r+1,a[0],a[0]+a[1]));a=0;var x=c.baseTileSize;c=c.useZoom;var m=[],e=[],w=[],d=[];k=k||{};var v=k.v||!1,t=k.O||!1;k=k.M||!1;if(!t&&0===g){e=cc;if(T&&T.bmapLandColor){e=T.bmapLandColor.replace("#","");3===e.length?e+="f":6===e.length&&(e+="ff");w=[];d=e.length;m=8===d?2:1;for(var q=0;q<d;q+=m)2===m?w.push(parseInt(e.slice(q,q+2),16)):w.push(parseInt(e.slice(q,q+1)+e.slice(q,q+1),16));e=w}m=[0,0,0,e[0],e[1],e[2],e[3],0,x,0,0,e[0],e[1],
e[2],e[3],0,x,x,0,e[0],e[1],e[2],e[3],0,0,x,0,e[0],e[1],e[2],e[3],0];e=[0,1,2,0,2,3];w=[72];d=[20]}1===h?(g++,a=g,g+=5):2===h&&(a=g+3*r.length+1);q=[];for(var f=[],l=!1,n=!1,E=0;E<r.length;E++){var u=r[E],y=u[0]>>2,B=H[y];y=H[y+1];var C=tb.b(ub,y,"polygon",c,v?Wb:vb,v,T);if(C&&C.length){C=C[0];if(C.g){if(6<c&&(71013===C.g||71012===C.g||71011===C.g))continue;if(5<c&&71011===C.g)continue;if(5>c&&(71012===C.g||71013===C.g))continue}var z=C.f[0],D=C.f[1],G=C.f[2],R=C.f[3],V=C.c[0],K=C.c[1],M=C.c[2],W=
C.c[3],Y=C.borderWidth/4,X=2.5*Y;u=Q(B+1,u[0],u[0]+u[1]);g+=3;for(B=0;B<u.length;B++){var O=u[B],J=O[0]>>2,L=H[J];if(xb(H[J+1],c)){var U=Q(L+1,O[0],O[0]+O[1]);O=new Int32Array(b,U[0][0],U[0][1]>>2);if(O.length&&!(4E3<O.length)){var P=new Uint16Array(b,U[2][0],U[2][1]>>1);!0!==k&&P&&m.length/8+O.length/2>bc&&(m=hd(m),p.push({type:"fill",data:[m,new Uint16Array(e)],h:m.byteLength/ac,has3D:l,has2D:n,verticesLength:d,styleIds:w}),m=[],e=[],w=[],d=[],n=l=!1);L=null;var N=!1;if(t){var F=1<hc?new Int16Array(b,
U[1][0],U[1][1]>>1):new Uint16Array(b,U[1][0],U[1][1]>>1);if(1===F.length&&F[0])L=Array(O.length>>1),0>F[0]&&(N=!0),Xb(L,F[0]),l=!0;else if(1<F.length){L=[];for(var I=0;I<F.length;I++)0>F[I]&&(N=!0),L[I]=F[I]||$b;l=!0}else n=!0}I=m.length/8;F=Za(O);J=H[J+2];k&&1===J&&(Y=X);if(!0!==k&&P){J=e;for(var Z=0;Z<P.length;Z++)J[J.length]=P[Z]+I;I=0;for(P=F.length/2;I<P;I++)J=L?L[I]:0,m.push(F[2*I],F[2*I+1],J,z,D,G,R,g);w.push(y);d.push(m.length/1.6)}if(L&&!N)for(q.length/8+F.length/2*2>bc&&(q=hd(q),f=new Uint16Array(f),
p.push({type:"fill",data:[q,f],h:q.byteLength/ac,has3D:l,has2D:n}),f=[],q=[]),N=q.length/8,I=0;I<F.length;I+=2){J=L[I/2];P=J-280;0>P&&(P=0);q.push(F[I],F[I+1],J,V,K,M,W,g,F[I],F[I+1],P,V,K,M,W,g);J=F[I];P=F[I+1];Z=I===F.length-2?F[1]:F[I+3];var da=!1;if(J===(I===F.length-2?F[0]:F[I+2])){if(Math.abs(J)<Zb||Math.abs(J-x)<Zb)da=!0}else P===Z&&(Math.abs(P)<Zb||Math.abs(P-x)<Zb)&&(da=!0);da||(I===F.length-2?f.push(N+I,N+I+1,N,N,N+I+1,N+1):f.push(N+I,N+I+1,N+I+2,N+I+2,N+I+1,N+I+3))}if(h&&C.borderWidth&&
F.length){if(F[0]-F[F.length-2]>Zb||F[1]-F[F.length-1]>Zb)F[F.length]=F[0],F[F.length]=F[1],L&&(L[L.length]=L[0]);if(U[3])for(U=Q(0,U[3][0],U[3][0]+U[3][1]),F=0;F<U.length;F++)N=U[F],J=Q(0,N[0],N[0]+N[1]),N=new Int16Array(b,J[0][0],J[0][1]>>1),jb()+N.length/2>bc&&(p.push({type:"line",data:[ab(),ib()],has3D:l,has2D:n}),lb()),I=new Uint16Array(b,J[1][0],J[1][1]>>1),J=new Int8Array(b,J[2][0],J[2][1]),kb(N,[V,K,M,W],Y,L,a,!1,O,J,0,I[0],I[1])}}}}}}q.length&&(q=hd(q),f=new Uint16Array(f),p.push({type:"fill",
data:[q,f],h:q.byteLength/ac,has3D:l,has2D:n}));m.length&&(m=hd(m),p.push({type:"fill",data:[m,new Uint16Array(e)],h:m.byteLength/ac,has3D:l,has2D:n,verticesLength:d,styleIds:w}));h&&(p.push({type:"line",data:[ab(),ib()],has3D:l,has2D:n}),lb());return Math.max(g,a)}
function Gc(b,a,c,p,g,h){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);for(var k=!1,r=!1,x=[],m=[],e=0;2>e;e++){0===e&&g++;for(var w=0;w<a.length;w++){var d=a[w],v=d[0]>>2,t=H[v],q=H[v+1];503969<=q&&503970>=q&&console.log("parseLink",q);if((v=tb.b(ub,q,"line",c,vb,!1,T))&&v.length&&(71059!==q||self.isText)&&(0!==e||v[0].borderWidth)&&(d=Q(t+1,d[0],d[0]+d[1]),0!==e||!v[0].i))if(1===e&&v[0].i){var f=v[0].i;t=f;var l=Sb[t]||Sb["MapRes/"+t];if(l){l=[l[0],l[1]];jb()&&(p[p.length]={type:"line",data:[ab(),ib()],has3D:k,
has2D:r,styleIds:x,verticesLength:m},lb(),r=k=!1,m=[],x=[]);/guojietianqiaojieti/.test(f)?g+=20:g++;var n=v[0].o/4,E=h?!0:!1,u=!1;/\b(32|16|8|4)$/.test(t)&&(n*=5,l[1]*=2,u=E=!0,f=f.replace(/\b4$/,"8"));var y=!1,B=!1;for(t=0;t<d.length;t++){var C=d[t],z=C[0]>>2,D=H[z];z=H[z+1];if(xb(z,c)&&(z=Q(D+1,C[0],C[0]+C[1]),C=null,D=new Int32Array(b,z[0][0],z[0][1]>>2),D.length&&!(8E3<D.length))){if(u&&4===D.length){var G=D,R=G[2],V=G[3],K=Math.sqrt(R*R+V*V);K=800*~~(K/800)/K;G[2]=~~(R*K);G[3]=~~(V*K)}if(h){var M=
1<hc?new Int16Array(b,z[1][0],z[1][1]>>1):new Uint16Array(b,z[1][0],z[1][1]>>1);if(1===M.length&&M[0])C=Array(D.length>>1),Xb(C,M[0]),y=!0;else if(1<M.length){C=[];for(y=0;y<M.length;y++)C[y]=M[y]||$b;y=!0}else B=!0}G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);kb(G,v[0].f,n,C,g,!0,D,R,1);x.push(q);m.push(5*jb())}}jb()&&(p[p.length]={type:"line",textureSize:l,texture:f+".png",lineWidth:v[0].o/2,data:[ab(),ib()],has3D:y,has2D:B,zoomWithMap:E,styleIds:x,verticesLength:m},
x=[],m=[],lb())}}else if(0===e?(q=v[0].c,f=v[0].borderWidth):(q=v[0].f,f=v[0].o),f/=4,!(0===f||0===q[3]||100<f))for(1===e&&g++,t=0;t<d.length;t++)if(C=d[t],z=C[0]>>2,D=H[z],z=H[z+1],xb(z,c)&&(z=Q(D+1,C[0],C[0]+C[1]),D=new Int32Array(b,z[0][0],z[0][1]>>2),D.length&&!(8E3<D.length))){G=new Int16Array(b,z[2][0],z[2][1]>>1);R=new Int8Array(b,z[3][0],z[3][1]);jb()+G.length/2>bc&&(p[p.length]={type:"line",data:[ab(),ib()],has3D:k,has2D:r},r=k=!1,lb());C=null;if(h)if(1<hc?M=new Int16Array(b,z[1][0],z[1][1]>>
1):M=new Uint16Array(b,z[1][0],z[1][1]>>1),1===M.length&&M[0])C=Array(D.length>>1),Xb(C,M[0]),k=!0;else if(1<M.length){C=[];for(k=0;k<M.length;k++)C[k]=M[k]||$b;k=!0}else r=!0;kb(G,q,f,C,g,1===v[0].G,D,R,0)}}}jb()&&(p[p.length]={type:"line",data:[ab(),ib()],has3D:k,has2D:r,styleIds:x,verticesLength:m},lb());return g}
function bd(b,a,c,p,g){var h=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]),k=[];a=[];for(var r=!1,x=!1,m=0;m<h.length;m++){var e=h[m];e=Q(H[e[0]>>2]+1,e[0],e[0]+e[1])[0];var w=e[0]>>2,d=H[w];if(xb(H[w+1],c)){var v=Q(d+1,e[0],e[0]+e[1]);e=new Int32Array(b,v[0][0],v[0][1]>>2);e=Za(e);d=1<hc?new Int16Array(b,v[3][0],v[3][1]>>1):new Uint16Array(b,v[3][0],v[3][1]>>1);w=void 0;if(1===d.length&&d[0])w=Array(e.length>>1),Xb(w,d[0]),r=!0;else if(1<d.length){w=[];for(var t=0;t<d.length;t++)w[t]=d[t]||1;r=!0}else x=!0;d=new Uint32Array(b,
v[2][0],v[2][1]>>2);t=k.length/8;g+=8;var q=tb.b(ub,d[0],"polygon",c,vb,!1,T),f=tb.b(ub,d[1],"polygon",c,vb,!1,T);if(q&&q.length&&f&&f.length){var l=new Int32Array(b,v[1][0],v[1][1]>>2);d=[l[0]/100,l[1]/100];q=q[0].f;l=[l[2]/100,l[3]/100];f=f[0].f;var n=[l[0]-d[0],l[1]-d[1]],E=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)),u=a;v=new Uint16Array(b,v[4][0],v[4][1]>>1);for(var y=0;y<v.length;y++)u[u.length]=v[y]+t;t=0;for(v=e.length/2;t<v;t++){u=[e[2*t],e[2*t+1]];if(0===n[0]){y=d[0];var B=u[1]}else B=
-((d[0]-u[0])*n[0]+(d[1]-u[1])*n[1])/(n[0]*n[0]+n[1]*n[1]),y=B*n[0]+d[0],B=B*n[1]+d[1];B=Math.sqrt(Math.pow(y-l[0],2)+Math.pow(B-l[1],2))/E;if(d[0]<l[0]&&y<d[0]||d[0]>l[0]&&y>d[0])B=1;else if(d[0]<l[0]&&y>l[0]||d[0]>l[0]&&y<l[0])B=0;k.push(u[0],u[1],w?w[t]:0,B*q[0]+(1-B)*f[0],B*q[1]+(1-B)*f[1],B*q[2]+(1-B)*f[2],B*q[3]+(1-B)*f[3],g)}}}}k.length&&(b=hd(k),p.push({type:"fill",data:[b,new Uint16Array(a)],h:b.byteLength/ac,has3D:r,has2D:x}));return g}
function $c(b,a,c,p,g){var h=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);if(!h.length)return g;a=[];var k=[];g++;var r=Za(new Int32Array(b,h[0][0],h[0][1]>>2)),x=new Int32Array(b,h[1][0],h[1][1]>>2);b=new Int16Array(b,h[2][0],h[2][1]>>1);var m=h=!1;1===b.length&&0===b[0]?m=!0:h=!0;b=Za(b,1);if(1===b.length){var e=b[0];b=Array(r.length>>1);Xb(b,e)}for(e=0;e<x.length;e++)if(xb(x[e],c)){var w=[r[4*e],r[4*e+1],b[2*e]],d=[r[4*e+2],r[4*e+3],b[2*e+1]],v=[(w[0]+d[0])/2,(w[1]+d[1])/2,(w[2]+d[2])/2],t=v[0]-w[0],q=v[1]-
w[1],f=[d[0]-w[0],d[1]-w[1]],l=f[0]*f[0]+f[1]*f[1];0<l&&(l=1/Math.sqrt(l),f[0]*=l,f[1]*=l);l=a.length/10;a[a.length]=v[0];a[a.length]=v[1];a[a.length]=w[2];a[a.length]=-t;a[a.length]=-q;a[a.length]=-f[1];a[a.length]=f[0];a[a.length]=.125;a[a.length]=.3125;a[a.length]=g;a[a.length]=v[0];a[a.length]=v[1];a[a.length]=w[2];a[a.length]=-t;a[a.length]=-q;a[a.length]=f[1];a[a.length]=-f[0];a[a.length]=.125;a[a.length]=.6875;a[a.length]=g;a[a.length]=v[0];a[a.length]=v[1];a[a.length]=d[2];a[a.length]=t;a[a.length]=
q;a[a.length]=-f[1];a[a.length]=f[0];a[a.length]=1;a[a.length]=.3125;a[a.length]=g;a[a.length]=v[0];a[a.length]=v[1];a[a.length]=d[2];a[a.length]=t;a[a.length]=q;a[a.length]=f[1];a[a.length]=-f[0];a[a.length]=1;a[a.length]=.6875;a[a.length]=g;k[k.length]=l;k[k.length]=l+1;k[k.length]=l+2;k[k.length]=l+2;k[k.length]=l+1;k[k.length]=l+3}k.length&&p.push({type:"arrow",data:[new Float32Array(a),new Uint16Array(k)],has3D:h,has2D:m});return g}
function ad(b,a,c,p,g){a=Q(H[a[0]>>2]+1,a[0],a[0]+a[1]);g++;for(var h=0;h<a.length;h++){var k=a[h],r=k[0]>>2,x=H[r];if((r=tb.b(ub,H[r+1],"line",c,vb,!1,T))&&r.length){var m=r[0];if("undefined"!==typeof m.i){m=m.i+".png";k=Q(x+1,k[0],k[0]+k[1]);for(x=0;x<k.length;x++){var e=k[x],w=e[0]>>2,d=H[w];xb(H[w+1],c)&&(w=H[w+2]/20,e=Q(d+1,e[0],e[0]+e[1]),kb(new Int16Array(b,e[2][0],e[2][1]>>1),r[0].f,w,null,g,!0,new Int32Array(b,e[0][0],e[0][1]>>2),new Int8Array(b,e[3][0],e[3][1]),2))}p[p.length]={type:"line",
texture:m,isSingle:!0,data:[ab(),ib()]};lb()}}}return g}
function Vb(b,a,c,p){var g=c.useZoom;if(!a||!a.length)return null;c=[];for(var h=[],k=0;k<a.length;k++){var r=a[k],x=r[0]>>2,m=H[x];if(8===H[x+1])for(r=Q(m+1,r[0],r[0]+r[1]),x=0;x<r.length;x++){var e=r[x];m=e[0]>>2;var w=H[m];m=H[m+1];var d=tb.b(ub,m,"polygon3d",g,p?Wb:vb,!1,T);if(d&&d[0]){d=d[0];var v=d.H,t=d.m;if(T){if(T.buildingFill){var q=void 0,f=t[0]/255,l=t[1]/255;t=t[2]/255;var n=Math.max(f,l,t),E=n-Math.min(f,l,t);for(0===E?q=0:n===f?q=(l-t)/E%6*60:n===l?q=60*((t-f)/E+2):n===t&&(q=60*((f-
l)/E+4));0>q;)q+=360;var u=[q,0===n?0:E/n,n];u[2]+=.05;0>u[2]&&(u[2]=0);f=q=t=void 0;l=u[2]*u[1];n=l*(1-Math.abs(u[0]/60%2-1));E=u[2]-l;u=u[0];0<=u&&60>u?(f=l,q=n,t=0):60<=u&&120>u?(f=n,q=l,t=0):120<=u&&180>u?(f=0,q=l,t=n):180<=u&&240>u?(f=0,q=n,t=l):240<=u&&300>u?(f=n,q=0,t=l):300<=u&&360>u&&(f=l,q=0,t=n);t=[Math.round(255<255*(f+E)?255:255*(f+E)),Math.round(255<255*(q+E)?255:255*(q+E)),Math.round(255<255*(t+E)?255:255*(t+E))];t[3]=v[3]||255}xc||(xc=v,yc=t)}e=Q(w+1,e[0],e[0]+e[1]);w=0;if(d.borderWidth){var y=
d.c[0],B=d.c[1],C=d.c[2],z=d.c[3];w=d.borderWidth/4}for(q=0;q<e.length;q++)if(f=e[q],l=f[0]>>2,n=H[l],xb(H[l+1],g)&&(l=H[l+2],!(l<d.filter))){n=Q(n+1,f[0],f[0]+f[1]);f=new Int32Array(b,n[0][0],n[0][1]>>2);u=new Uint16Array(b,n[1][0],n[1][1]>>1);E=f;var D=l,G=v[0],R=v[1],V=v[2],K=v[3],M=t[0],W=t[1],Y=t[2],X=t[3],O=E;Ma||(Ma=A._get_block_points_address()>>2);Aa.set(O,Ma);O=u;Va||(Va=A._get_block_triangle_indices_address()>>1);Ca.set(O,Va);A._append_block_data(E.length,u.length,D,G,R,V,K,M,W,Y,X);c.push(m);
h.push(7*$a());if(d.borderWidth&&f.length&&(E=Array(f.length>>1),Xb(E,100*l),n[2]))for(l=Q(0,n[2][0],n[2][0]+n[2][1]),n=0;n<l.length;n++)u=l[n],G=Q(0,u[0],u[0]+u[1]),u=new Int16Array(b,G[0][0],G[0][1]>>1),D=new Uint16Array(b,G[1][0],G[1][1]>>1),G=new Int8Array(b,G[2][0],G[2][1]),kb(u,[y,B,C,z],w,E,2,!0,f,G,0,D[0],D[1])}}}}b={type:"line",data:[ab(),ib()]};lb();return 0<$a()?(Xa||(Xa=A._get_block_vertex_start()),a=new Float32Array(ra.slice(Xa,A._get_block_vertex_end())),Wa||(Wa=A._get_block_index_start()),
p=new Uint16Array(ra.slice(Wa,A._get_block_index_end())),c={vertex:a,index:p,styleIds:c,verticesLength:h},A._reset_block(),c.border=b,c):null}function hd(b){var a=new ArrayBuffer(b.length/8*20),c=new Float32Array(a);a=new Uint8Array(a);for(var p=0,g=12,h=4,k=0;k<b.length;k+=8)c[p]=b[k],c[p+1]=b[k+1],c[p+2]=b[k+2]/100,a[g]=b[k+3],a[g+1]=b[k+4],a[g+2]=b[k+5],a[g+3]=b[k+6],c[h]=b[k+7],p+=5,g+=20,h+=5;return c}
function dd(b,a,c,p,g){if(!a||!a.length)return 0;c=c.useZoom;for(var h=0,k=0,r=0,x=0,m=0;m<a.length;m++){var e=a[m],w=e[0]>>2;if(25===H[w+1]){e=Q(H[w]+1,e[0],e[0]+e[1])[0];var d=e[0]>>2;w=H[d];if((d=tb.b(ub,H[d+1],"polygon3d",c,vb,!1,T))&&d[0]){d=d[0];var v=d.m;yc&&(v=yc);e=Q(w+1,e[0],e[0]+e[1])[0];w=Q(H[e[0]>>2]+1,e[0],e[0]+e[1]);e=new Int32Array(b,w[1][0],w[1][1]>>2);h+=e.length;if(p){d=new Int32Array(b,w[2][0],w[2][1]>>2);w=e;for(var t=p,q=x,f=new DataView(t.buffer),l,n=0;n<w.length;n+=3)l=n/3*
7+q,t[l]=w[n]/100,t[l+1]=w[n+1]/100,t[l+2]=w[n+2]/100,t[l+3]=d[n],t[l+4]=d[n+1],t[l+5]=d[n+2],f.setUint8(4*l+24,v[0]),f.setUint8(4*l+25,v[1]),f.setUint8(4*l+26,v[2]),f.setUint8(4*l+27,v[3]);w=[];for(d=0;d<e.length/3;d++)w.push(d+k);g.set(w,r);x+=e.length/3*7;r+=w.length;k+=e.length/3}}}}return h}
function cd(b,a){var c=[],p=[];a=a.useZoom;for(var g=0;g<b.length;g++){var h=b[g],k=h[0]>>2;if(24===H[k+1]){k=Q(H[k]+1,h[0],h[0]+h[1])[0];h=k[0]>>2;var r=H[h];if((h=tb.b(ub,H[h+1],"polygon3d",a,vb,!1,T))&&h[0])for(h=h[0],h=h.m,yc&&(h=yc),k=Q(r+1,k[0],k[0]+k[1]),r=0;r<k.length;r++){var x=k[r][0]/4,m=c,e=p,w=c.length/10,d=H[x+1]/100,v=H[x+2]/100,t=H[x+3]/100,q=H[x+4]/100,f=h[0],l=h[1],n=h[2];for(x=0;360>=x;x+=36){var E=Math.cos(x*Math.PI/180)*v+t,u=Math.sin(x*Math.PI/180)*v+q,y=E+t,B=u+q;m.push(E,u,
0,y,B,0,f,l,n,255);m.push(E,u,d,y,B,0,f,l,n,255)}for(x=0;10>x;x++)m=2*x+w,e.push(m,m+2,m+3),e.push(m,m+3,m+1)}}}if(0<c.length){b=c.length/10;a=new Float32Array(7*b);g=new DataView(a.buffer);for(k=0;k<b;k++)h=7*k,a[h]=c[10*k],a[h+1]=c[10*k+1],a[h+2]=c[10*k+2],a[h+3]=c[10*k+3],a[h+4]=c[10*k+4],a[h+5]=c[10*k+5],g.setUint8(4*h+24,c[10*k+6]),g.setUint8(4*h+25,c[10*k+7]),g.setUint8(4*h+26,c[10*k+8]),g.setUint8(4*h+27,c[10*k+9]);c={vertex:a,index:new Uint16Array(p)}}else c=null;return c};
